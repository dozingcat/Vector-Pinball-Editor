{
    "ballcolor": [192, 192, 224],
    "ballradius": "0.4",
    "elements": [
        {
            "class": "WallElement",
            "position": ["18.9", "0.1", "18.9", "10.72"]
        }, 
        {
            "class": "WallElement",
            "position": ["19.9", "0.1", "19.9", "10.72"]
        }, 
        {
            "class": "WallElement",
            "color": [0, 0, 0],
            "kill": true,
            "position": ["0.1", "0", "18.7", "0"]
        }, 
        {
            "class": "WallElement",
            "position": ["18.9", "0.1", "19.9", "0.1"]
        }, 
        {
            "class": "WallElement",
            "position": ["0.1", "4", "6", "1"]
        }, 
        {
            "class": "WallElement",
            "position": ["18.9", "4", "12.9", "1"]
        }, 
        {
            "class": "WallElement",
            "name": "left border",
            "position": ["0.1", "4", "0.1", "10"]
        }, 
        {
            "class": "WallElement",
            "color": [128, 128, 128],
            "disabled": true,
            "id": "LaunchBarrier",
            "position": ["18.32", "13.20", "18.64", "14.76"]
        }, 
        {
            "class": "SensorElement",
            "id": "LaunchBarrierSensor",
            "rect": ["17.25", "13.0", "18.25", "15.5"]
        }, 
        {
            "class": "SensorElement",
            "id": "LaunchBarrierRetract",
            "rect": ["19.0", "9.7", "19.8", "11.7"]
        }, 
        {
            "class": "WallElement",
            "color": [0, 255, 0],
            "id": "BallSaver-left",
            "kick": "6.0",
            "position": ["0.15", "4.8", "1.15", "4.8"],
            "retractWhenHit": true
        }, 
        {
            "class": "WallElement",
            "color": [0, 255, 0],
            "id": "BallSaver-right",
            "kick": "6.0",
            "position": ["17.85", "4.8", "18.85", "4.8"],
            "retractWhenHit": true
        }, 
        {
            "class": "WallElement",
            "color": [0, 0, 255],
            "kick": "3.5",
            "position": ["3.63", "7.56", "5.45", "4.04"],
            "score": 100
        }, 
        {
            "class": "WallElement",
            "color": [0, 0, 255],
            "kick": "3.5",
            "position": ["15.37", "7.56", "13.29", "4.28"],
            "score": 100
        }, 
        {
            "class": "RolloverGroupElement",
            "color": [0, 224, 224],
            "cycleOnFlipper": true,
            "id": "FlipperRollovers",
            "radius": "0.32",
            "rollovers": [
                {
                    "position": ["0.65", "6"]
                }, 
                {
                    "position": ["1.75", "6"]
                }, 
                {
                    "position": ["2.85", "6"]
                }, 
                {
                    "position": ["16.15", "6"]
                }, 
                {
                    "position": ["17.25", "6"]
                }, 
                {
                    "position": ["18.35", "6"]
                }
            ],
            "score": 500
        }, 
        {
            "class": "FlipperElement",
            "downspeed": "3",
            "length": "2.0",
            "maxangle": "20",
            "minangle": "-20",
            "position": ["6.88", "1.7"],
            "upspeed": "8"
        }, 
        {
            "class": "FlipperElement",
            "downspeed": "3",
            "length": "-2.0",
            "maxangle": "20",
            "minangle": "-20",
            "position": ["11.7", "1.7"],
            "upspeed": "8"
        }, 
        {
            "class": "WallPathElement",
            "positions": [
                ["1.2", "7.7"], 
                ["1.2", "4.6"], 
                ["6.78", "1.8"]
            ]
        }, 
        {
            "class": "WallPathElement",
            "positions": [
                ["3.63", "7.56"], 
                ["3.4", "8"], 
                ["3.4", "4.9"], 
                ["5.68", "3.6"], 
                ["5.45", "4.04"]
            ]
        }, 
        {
            "class": "WallElement",
            "position": ["2.3", "5.3", "2.3", "6.7"]
        }, 
        {
            "class": "WallPathElement",
            "positions": [
                ["17.8", "7.7"], 
                ["17.8", "4.6"], 
                ["11.8", "1.8"]
            ]
        }, 
        {
            "class": "WallElement",
            "position": ["16.7", "5.3", "16.7", "6.7"]
        }, 
        {
            "class": "WallPathElement",
            "positions": [
                ["15.37", "7.56"], 
                ["15.6", "8"], 
                ["15.6", "4.9"], 
                ["13.06", "3.84"], 
                ["13.29", "4.28"]
            ]
        }, 
        {
            "class": "BumperElement",
            "color": [0, 102, 255],
            "kick": "1.0",
            "position": ["8.56", "25"],
            "radius": "0.5",
            "score": 500
        }, 
        {
            "class": "BumperElement",
            "color": [204, 0, 0],
            "kick": "1.0",
            "position": ["10", "23"],
            "radius": "0.5",
            "score": 500
        }, 
        {
            "class": "BumperElement",
            "color": [0, 204, 0],
            "kick": "1.0",
            "position": ["11.44", "25"],
            "radius": "0.5",
            "score": 500
        }, 
        {
            "center": ["1.6", "10"],
            "class": "WallArcElement",
            "maxangle": "180",
            "minangle": "110",
            "segments": 10,
            "xradius": "1.5",
            "yradius": "3"
        }, 
        {
            "center": ["16.9", "10.72"],
            "class": "WallArcElement",
            "maxangle": "45",
            "minangle": "0",
            "segments": 15,
            "xradius": "2",
            "yradius": "3.5"
        }, 
        {
            "center": ["16.9", "10.72"],
            "class": "WallArcElement",
            "maxangle": "54.5",
            "minangle": "0",
            "segments": 20,
            "xradius": "3",
            "yradius": "5"
        }, 
        {
            "center": ["10", "23"],
            "class": "WallArcElement",
            "maxangle": "180",
            "minangle": "0",
            "segments": 40,
            "xradius": "9.9",
            "yradius": "6.9"
        }, 
        {
            "center": ["7", "23"],
            "class": "WallArcElement",
            "maxangle": "215",
            "minangle": "180",
            "segments": 15,
            "xradius": "6.9",
            "yradius": "8"
        }, 
        {
            "class": "WallElement",
            "position": ["1.34", "14.68", "1.34", "18.4"]
        }, 
        {
            "center": ["13", "23"],
            "class": "WallArcElement",
            "maxangle": "0",
            "minangle": "-35",
            "segments": 15,
            "xradius": "6.9",
            "yradius": "8"
        }, 
        {
            "class": "WallElement",
            "position": ["18.64", "14.8", "18.64", "18.4"]
        }, 
        {
            "class": "WallElement",
            "position": ["3.06", "19.88", "4.22", "20.7"]
        }, 
        {
            "class": "WallElement",
            "position": ["6.75", "21.58", "8.5", "21.58"]
        }, 
        {
            "class": "WallElement",
            "position": ["11.5", "21.58", "13.25", "21.58"]
        }, 
        {
            "class": "WallElement",
            "position": ["16.94", "19.88", "15.78", "20.7"]
        }, 
        {
            "center": ["10", "23"],
            "class": "WallArcElement",
            "maxangle": "180",
            "minangle": "0",
            "segments": 30,
            "xradius": "8.6",
            "yradius": "5.6"
        }, 
        {
            "center": ["7", "23"],
            "class": "WallArcElement",
            "maxangle": "225",
            "minangle": "180",
            "segments": 10,
            "xradius": "5.6",
            "yradius": "4.4"
        }, 
        {
            "center": ["13", "23"],
            "class": "WallArcElement",
            "maxangle": "0",
            "minangle": "-45",
            "segments": 10,
            "xradius": "5.6",
            "yradius": "4.4"
        }, 
        {
            "center": ["7.5", "23"],
            "class": "WallArcElement",
            "maxangle": "215",
            "minangle": "180",
            "segments": 15,
            "xradius": "4",
            "yradius": "4"
        }, 
        {
            "center": ["8.5", "23"],
            "class": "WallArcElement",
            "maxangle": "180",
            "minangle": "110",
            "segments": 20,
            "xradius": "5",
            "yradius": "5.5"
        }, 
        {
            "center": ["11.5", "23"],
            "class": "WallArcElement",
            "maxangle": "70",
            "minangle": "0",
            "segments": 20,
            "xradius": "5",
            "yradius": "5.5"
        }, 
        {
            "center": ["12.5", "23"],
            "class": "WallArcElement",
            "maxangle": "0",
            "minangle": "-35",
            "segments": 15,
            "xradius": "4",
            "yradius": "4"
        }, 
        {
            "center": ["6.75", "24"],
            "class": "WallArcElement",
            "maxangle": "270",
            "minangle": "135",
            "segments": 20,
            "xradius": "1.25",
            "yradius": "2.42"
        }, 
        {
            "class": "WallElement",
            "kick": "1",
            "position": [8.520000000000001, 21.580000000000002, 5.880000000000001, 25.700000000000003]
        }, 
        {
            "center": ["13.25", "24"],
            "class": "WallArcElement",
            "maxangle": "45",
            "minangle": "-90",
            "segments": 20,
            "xradius": "1.25",
            "yradius": "2.42"
        }, 
        {
            "class": "WallElement",
            "kick": "1",
            "position": ["11.48", "21.58", "14.12", "25.7"]
        }, 
        {
            "class": "DropTargetGroupElement",
            "color": [0, 102, 255],
            "gapBetweenTargets": "0.1",
            "gapFromWall": "-0.15",
            "id": "DropTargets_BlueRamp",
            "numTargets": 2,
            "positions": [],
            "reset": "2",
            "score": 500,
            "startDistanceAlongWall": "0.06",
            "targetWidth": "0.6",
            "wallEnd": ["4.22", "20.7"],
            "wallStart": ["3.06", "19.88"]
        }, 
        {
            "class": "DropTargetGroupElement",
            "color": [204, 0, 0],
            "gapBetweenTargets": "0.1",
            "gapFromWall": "0.15",
            "id": "DropTargets_RedRamp",
            "numTargets": 3,
            "positions": [],
            "reset": "2",
            "score": 500,
            "startDistanceAlongWall": "0.02",
            "targetWidth": "0.5",
            "wallEnd": ["6.75", "21.58"],
            "wallStart": ["8.5", "21.58"]
        }, 
        {
            "class": "DropTargetGroupElement",
            "color": [204, 204, 0],
            "gapBetweenTargets": "0.1",
            "gapFromWall": "-0.15",
            "id": "DropTargets_YellowRamp",
            "numTargets": 3,
            "positions": [],
            "reset": "2",
            "score": 500,
            "startDistanceAlongWall": "0.02",
            "targetWidth": "0.5",
            "wallEnd": ["13.25", "21.58"],
            "wallStart": ["11.5", "21.58"]
        }, 
        {
            "class": "DropTargetGroupElement",
            "color": [0, 204, 0],
            "gapBetweenTargets": "0.1",
            "gapFromWall": "0.15",
            "id": "DropTargets_GreenRamp",
            "numTargets": 2,
            "positions": [],
            "reset": "2",
            "score": 500,
            "startDistanceAlongWall": "0.06",
            "targetWidth": "0.6",
            "wallEnd": ["15.78", "20.7"],
            "wallStart": ["16.94", "19.88"]
        }, 
        {
            "center": [2.5, 14.759999999999998],
            "class": "WallArcElement",
            "maxangle": "234",
            "minangle": "180",
            "xradius": "2.4",
            "yradius": "2.4"
        }, 
        {
            "class": "WallElement",
            "color": [170, 170, 170],
            "id": "TriangleWall1",
            "kick": "3",
            "position": ["10", "20", "9", "18.3"],
            "score": 100
        }, 
        {
            "class": "WallElement",
            "color": [170, 170, 170],
            "id": "TriangleWall3",
            "kick": "3",
            "position": ["11", "18.3", "10", "20"],
            "score": 100
        }, 
        {
            "class": "WallElement",
            "color": [170, 170, 170],
            "id": "TriangleWall2",
            "kick": "3",
            "position": ["9", "18.3", "11", "18.3"],
            "score": 100
        }, 
        {
            "class": "RolloverGroupElement",
            "color": [170, 170, 170],
            "id": "TriangleCenter",
            "radius": "0.4",
            "rollovers": [
                {
                    "position": [10.0, 18.86]
                }
            ],
            "score": 5000
        }, 
        {
            "class": "RolloverGroupElement",
            "color": [102, 102, 102],
            "ignoreBall": true,
            "radius": "3.5",
            "rollovers": [
                {
                    "position": ["9.29", "11.5"]
                }
            ]
        }, 
        {
            "class": "RolloverGroupElement",
            "color": [0, 0, 0, 0],
            "id": "CenterRollover_Blue_1",
            "ignoreBall": true,
            "radius": "0.35",
            "rollovers": [
                {
                    "position": ["12.67", "12.41"]
                }
            ],
            "score": 1000
        }, 
        {
            "class": "RolloverGroupElement",
            "color": [0, 0, 0, 0],
            "id": "CenterRollover_Green_1",
            "ignoreBall": true,
            "radius": "0.35",
            "rollovers": [
                {
                    "position": ["11.76", "13.97"]
                }
            ],
            "score": 1000
        }, 
        {
            "class": "RolloverGroupElement",
            "color": [0, 0, 0, 0],
            "id": "CenterRollover_Yellow_1",
            "ignoreBall": true,
            "radius": "0.35",
            "rollovers": [
                {
                    "position": ["10.20", "14.88"]
                }
            ],
            "score": 1000
        }, 
        {
            "class": "RolloverGroupElement",
            "color": [0, 0, 0, 0],
            "id": "CenterRollover_Red_1",
            "ignoreBall": true,
            "radius": "0.35",
            "rollovers": [
                {
                    "position": ["8.38", "14.88"]
                }
            ],
            "score": 1000
        }, 
        {
            "class": "RolloverGroupElement",
            "color": [0, 0, 0, 0],
            "id": "CenterRollover_Blue_2",
            "ignoreBall": true,
            "radius": "0.35",
            "rollovers": [
                {
                    "position": ["6.82", "13.97"]
                }
            ],
            "score": 1000
        }, 
        {
            "class": "RolloverGroupElement",
            "color": [0, 0, 0, 0],
            "id": "CenterRollover_Green_2",
            "ignoreBall": true,
            "radius": "0.35",
            "rollovers": [
                {
                    "position": ["5.91", "12.41"]
                }
            ],
            "score": 1000
        }, 
        {
            "class": "RolloverGroupElement",
            "color": [0, 0, 0, 0],
            "id": "CenterRollover_Yellow_2",
            "ignoreBall": true,
            "radius": "0.35",
            "rollovers": [
                {
                    "position": ["5.91", "10.59"]
                }
            ],
            "score": 1000
        }, 
        {
            "class": "RolloverGroupElement",
            "color": [0, 0, 0, 0],
            "id": "CenterRollover_Red_2",
            "ignoreBall": true,
            "radius": "0.35",
            "rollovers": [
                {
                    "position": ["6.82", "9.03"]
                }
            ],
            "score": 1000
        }, 
        {
            "class": "RolloverGroupElement",
            "color": [0, 0, 0, 0],
            "id": "CenterRollover_Blue_3",
            "ignoreBall": true,
            "radius": "0.35",
            "rollovers": [
                {
                    "position": ["8.38", "8.12"]
                }
            ],
            "score": 1000
        }, 
        {
            "class": "RolloverGroupElement",
            "color": [0, 0, 0, 0],
            "id": "CenterRollover_Green_3",
            "ignoreBall": true,
            "radius": "0.35",
            "rollovers": [
                {
                    "position": ["10.20", "8.12"]
                }
            ],
            "score": 1000
        }, 
        {
            "class": "RolloverGroupElement",
            "color": [0, 0, 0, 0],
            "id": "CenterRollover_Yellow_3",
            "ignoreBall": true,
            "radius": "0.35",
            "rollovers": [
                {
                    "position": ["11.76", "9.03"]
                }
            ],
            "score": 1000
        }, 
        {
            "class": "RolloverGroupElement",
            "color": [0, 0, 0, 0],
            "id": "CenterRollover_Red_3",
            "ignoreBall": true,
            "radius": "0.35",
            "rollovers": [
                {
                    "position": ["12.67", "10.59"]
                }
            ],
            "score": 1000
        }, 
        {
            "class": "WallElement",
            "color": [204, 0, 0],
            "id": "CenterLine_Red_3_1",
            "ignoreBall": true,
            "position": ["8.38", "14.88", "12.67", "10.59"]
        }, 
        {
            "class": "WallElement",
            "color": [204, 0, 0],
            "id": "CenterLine_Red_2_3",
            "ignoreBall": true,
            "position": ["12.67", "10.59", "6.82", "9.03"]
        }, 
        {
            "class": "WallElement",
            "color": [204, 0, 0],
            "id": "CenterLine_Red_1_2",
            "ignoreBall": true,
            "position": ["6.82", "9.03", "8.38", "14.88"]
        }, 
        {
            "class": "WallElement",
            "color": [204, 204, 0],
            "id": "CenterLine_Yellow_3_1",
            "ignoreBall": true,
            "position": ["10.20", "14.88", "11.76", "9.03"]
        }, 
        {
            "class": "WallElement",
            "color": [204, 204, 0],
            "id": "CenterLine_Yellow_2_3",
            "ignoreBall": true,
            "position": ["11.76", "9.03", "5.91", "10.59"]
        }, 
        {
            "class": "WallElement",
            "color": [204, 204, 0],
            "id": "CenterLine_Yellow_1_2",
            "ignoreBall": true,
            "position": ["5.91", "10.59", "10.20", "14.88"]
        }, 
        {
            "class": "WallElement",
            "color": [0, 102, 255],
            "id": "CenterLine_Blue_1_2",
            "ignoreBall": true,
            "position": ["6.82", "13.97", "12.67", "12.41"]
        }, 
        {
            "class": "WallElement",
            "color": [0, 102, 255],
            "id": "CenterLine_Blue_3_1",
            "ignoreBall": true,
            "position": ["12.67", "12.41", "8.38", "8.12"]
        }, 
        {
            "class": "WallElement",
            "color": [0, 102, 255],
            "id": "CenterLine_Blue_2_3",
            "ignoreBall": true,
            "position": ["8.38", "8.12", "6.82", "13.97"]
        }, 
        {
            "class": "WallElement",
            "color": [0, 204, 0],
            "id": "CenterLine_Green_3_1",
            "ignoreBall": true,
            "position": ["11.76", "13.97", "10.20", "8.12"]
        }, 
        {
            "class": "WallElement",
            "color": [0, 204, 0],
            "id": "CenterLine_Green_2_3",
            "ignoreBall": true,
            "position": ["10.20", "8.12", "5.91", "12.41"]
        }, 
        {
            "class": "WallElement",
            "color": [0, 204, 0],
            "id": "CenterLine_Green_1_2",
            "ignoreBall": true,
            "position": ["5.91", "12.41", "11.76", "13.97"]
        }, 
        {
            "class": "DropTargetGroupElement",
            "gapBetweenTargets": "0.3",
            "gapFromWall": "-0.2",
            "id": "DropTargetRightSave",
            "numTargets": 3,
            "positions": [],
            "reset": "2",
            "score": 500,
            "startDistanceAlongWall": "0.5",
            "targetWidth": "0.7",
            "wallEnd": ["18.64", "14.8"],
            "wallStart": ["18.64", "18.4"]
        }, 
        {
            "class": "DropTargetGroupElement",
            "gapBetweenTargets": "0.3",
            "gapFromWall": "0.2",
            "id": "DropTargetLeftSave",
            "numTargets": 3,
            "positions": [],
            "reset": "2",
            "score": 500,
            "startDistanceAlongWall": "0.5",
            "targetWidth": "0.7",
            "wallEnd": ["1.34", "14.68"],
            "wallStart": ["1.34", "18.4"]
        }, 
        {
            "class": "SensorElement",
            "id": "RampSensor_OuterLeftTop",
            "rect": ["7.0", "28.5", "8.0", "29.5"]
        }, 
        {
            "class": "SensorElement",
            "id": "RampSensor_OuterRightTop",
            "rect": ["12", "28.5", "13", "29.5"]
        }, 
        {
            "class": "SensorElement",
            "id": "RampSensor_LeftMiddle",
            "rect": ["4.5", "25.2", "5.5", "26.2"]
        }, 
        {
            "class": "SensorElement",
            "id": "RampSensor_RightMiddle",
            "rect": ["14.5", "26.2", "15.5", "25.2"]
        }, 
        {
            "class": "SensorElement",
            "id": "RampSensor_LeftTop",
            "rect": ["6.0", "25.7", "7.0", "27.7"]
        }, 
        {
            "class": "SensorElement",
            "id": "RampSensor_RightTop",
            "rect": ["13", "25.7", "14", "27.7"]
        }, 
        {
            "class": "BumperElement",
            "color": [204, 204, 0],
            "kick": "1.0",
            "position": ["10", "27"],
            "radius": "0.5",
            "score": 500
        }, 
        {
            "class": "SensorElement",
            "id": "RampSensor_LeftBottom",
            "rect": ["3.7", "21.9", "5.4", "23.9"]
        }, 
        {
            "class": "SensorElement",
            "id": "RampSensor_RightBottom",
            "rect": ["14.6", "21.9", "16.3", "23.9"]
        }, 
        {
            "class": "SensorElement",
            "id": "RampSensor_OuterLeftBottom",
            "rect": ["0.2", "22.5", "1.3", "23.5"]
        }, 
        {
            "class": "SensorElement",
            "id": "RampSensor_OuterRightBottom",
            "rect": ["18.7", "22.5", "19.8", "23.5"]
        }, 
        {
            "class": "WallElement",
            "position": ["0.1", "14.76", "0.1", "23"]
        }, 
        {
            "class": "WallElement",
            "color": [0, 102, 255],
            "id": "ExtraBallBarrier_Blue",
            "kick": "2",
            "position": ["0.1", "15", "1.34", "15"],
            "retractWhenHit": true,
            "score": 1000
        }, 
        {
            "class": "RolloverGroupElement",
            "color": [170, 170, 170],
            "id": "ExtraBallRollover",
            "radius": "0.4",
            "rollovers": [
                {
                    "position": ["0.72", "17.9"]
                }
            ]
        }, 
        {
            "class": "WallElement",
            "color": [204, 0, 0],
            "id": "ExtraBallBarrier_Red",
            "kick": "2",
            "position": ["0.1", "15.7", "1.34", "15.7"],
            "retractWhenHit": true,
            "score": 1000
        }, 
        {
            "class": "WallElement",
            "color": [204, 204, 0],
            "id": "ExtraBallBarrier_Yellow",
            "kick": "2",
            "position": ["0.1", "16.4", "1.34", "16.4"],
            "retractWhenHit": true,
            "score": 1000
        }, 
        {
            "class": "WallElement",
            "color": [0, 204, 0],
            "id": "ExtraBallBarrier_Green",
            "kick": "2",
            "position": ["0.1", "17.1", "1.34", "17.1"],
            "retractWhenHit": true,
            "score": 1000
        }, 
        {
            "class": "SensorElement",
            "id": "Sensor_ExtraBallExit",
            "rect": ["1.4", "12.5", "3.4", "14.64"]
        }
    ],
    "gravity": "3.6",
    "height": "30",
    "launchDeadZone": ["19", "0", "20", "1.4"],
    "launchPosition": ["19.4", "3.0"],
    "launchVelocity": ["0", "20.99"],
    "launchVelocityRandomDelta": ["0", "0.01"],
    "name": "Eye of Horus",
    "numballs": 3,
    "script": "def TAU = 2*Math.PI;\u000adef IGNORE_BALL_COLOR = false;\u000a\u000aenum BallColor {BLUE, RED, YELLOW, GREEN};\u000adef BALL_COLOR_VALUES = BallColor.values();\u000a\u000aenum MultiballStatus {NOT_READY, READY, STARTING, ACTIVE};\u000a\u000adef JACKPOT_BASE_SCORE = 50000;\u000adef RAMP_BASE_SCORE = 5000;\u000a\u000adef BALL_PRIMARY_COLORS = [\u000a  (BallColor.BLUE): Color.fromRGB(0x66, 0x88, 0xEE),\u000a  (BallColor.RED): Color.fromRGB(0xEE, 0x88, 0x88),\u000a  (BallColor.YELLOW): Color.fromRGB(0xCC, 0xCC, 0x77),\u000a  (BallColor.GREEN): Color.fromRGB(0x77, 0xDD, 0x77),\u000a];\u000adef BALL_SECONDARY_COLORS = [\u000a  (BallColor.BLUE): Color.fromRGB(0x44, 0x66, 0xCC),\u000a  (BallColor.RED): Color.fromRGB(0xCC, 0x66, 0x66),\u000a  (BallColor.YELLOW): Color.fromRGB(0xAA, 0xAA, 0x55),\u000a  (BallColor.GREEN): Color.fromRGB(0x55, 0xBB, 0x55),\u000a];\u000adef WALL_COLORS = [\u000a  (BallColor.BLUE): Color.fromRGB(0x00, 0x66, 0xFF),\u000a  (BallColor.RED): Color.fromRGB(0xCC, 0x00, 0x00),\u000a  (BallColor.YELLOW): Color.fromRGB(0xCC, 0xCC, 0x00),\u000a  (BallColor.GREEN): Color.fromRGB(0x00, 0xCC, 0x00),\u000a];\u000adef DISABLED_ROLLOVER_COLORS = [\u000a  (BallColor.BLUE): Color.fromRGB(0x00, 0x33, 0x66),\u000a  (BallColor.RED): Color.fromRGB(0x66, 0x00, 0x00),\u000a  (BallColor.YELLOW): Color.fromRGB(0x66, 0x66, 0x00),\u000a  (BallColor.GREEN): Color.fromRGB(0x00, 0x66, 0x00),\u000a];\u000a\u000a\u000a// Initialized in gameStarted.\u000adef centerRolloversByColor = null;\u000adef centerLinesByColor = null;\u000a\u000adef launchBarrier = null;\u000a\u000adef rampBonuses = null;\u000a\u000adef extraBallBarriers = null;\u000adef extraBallRollover = null;\u000a\u000a// Rotating triangle.\u000adef triangleRotationSpeed = 1;\u000adef triangleRotationBaseSpeed = 1.0 // radians/sec\u000adef triangleRotationAngle = 0.0;\u000a// These should be computed.\u000adef triangleCenter = [10, 18.86];\u000adef triangleWalls = null;\u000a// Equilateral triangle with sides of length 2. Base is sqrt(3),\u000a// center is 2/3 from vertex to base.\u000adef triangleRadius = Math.sqrt(3.0) * 2/3;\u000adef triangleCenterRollover = null;\u000a\u000adef multiballStatus = MultiballStatus.NOT_READY;\u000adef multiballJackpotCount = 0;\u000a\u000a// For each ball, store the most recent sensor that it's hit.\u000a// This lets us detect when a ball has fully gone over a ramp.\u000adef previousSensors = null;\u000a\u000adef setBallColor = {ball, color ->\u000a  ball.setPrimaryColor(BALL_PRIMARY_COLORS[color]);\u000a  ball.setSecondaryColor(BALL_SECONDARY_COLORS[color]);\u000a};\u000a\u000adef getBallColor = {ball ->\u000a  def ballPrimaryColor = ball.getPrimaryColor();\u000a  for (def ballColor : BALL_COLOR_VALUES) {\u000a    if (ballPrimaryColor == BALL_PRIMARY_COLORS[ballColor]) {\u000a      return ballColor;\u000a    }\u000a  }\u000a};\u000a\u000adef hasBallWithColor = {field, ballColor ->\u000a  for (def ball : field.getBalls()) {\u000a    if (getBallColor(ball) == ballColor) return true;\u000a  }\u000a  return false;\u000a};\u000a\u000adef unusedBallColor = {field ->\u000a  for (def color : BALL_COLOR_VALUES) {\u000a    if (!hasBallWithColor(field, color)) return color;\u000a  }\u000a  return null;\u000a};\u000a\u000adef updateCenterRollovers = {field ->\u000a  BALL_COLOR_VALUES.each {ballColor ->\u000a    def hasBall = hasBallWithColor(field, ballColor) || IGNORE_BALL_COLOR;\u000a    centerRolloversByColor[ballColor].forEach {rollover ->\u000a      rollover.setIgnoreBall(!hasBall);\u000a      if (hasBall) {\u000a        rollover.setVisible(true);\u000a        rollover.setNewColor(WALL_COLORS[ballColor]);\u000a      }\u000a      else {\u000a        def active = rollover.allRolloversActive();\u000a        rollover.setVisible(active);\u000a        if (active) {\u000a          rollover.setNewColor(DISABLED_ROLLOVER_COLORS[ballColor]);\u000a        }\u000a      }\u000a    };\u000a  };\u000a};\u000a\u000a// Forward declaration since it's called by updateCenterLines.\u000adef resetCenter = null;\u000a\u000adef updateCenterLines = {field ->\u000a  def allLinesVisible = true;\u000a  BALL_COLOR_VALUES.each {ballColor ->\u000a    def rollovers = centerRolloversByColor[ballColor];\u000a    def lines = centerLinesByColor[ballColor];\u000a    for (def i=0; i<rollovers.size(); i++) {\u000a      def r1 = rollovers[i];\u000a      def r2 = rollovers[i==rollovers.size()-1 ? 0 : i+1];\u000a      def lineVisible = (r1.allRolloversActive() && r2.allRolloversActive());\u000a      lines[i].setVisible(lineVisible);\u000a      if (!lineVisible) allLinesVisible = false;\u000a    }\u000a  };\u000a  if (allLinesVisible) {\u000a    if (multiballStatus == MultiballStatus.ACTIVE) {\u000a      multiballJackpotCount += 1;\u000a      def prefix = (multiballJackpotCount > 1) ? multiballJackpotCount+\"x \" : \"\";\u000a      field.showGameMessage(prefix + \"Jackpot!\", 3000);\u000a      field.addScore((JACKPOT_BASE_SCORE * multiballJackpotCount).toLong());\u000a      // This will make a recursive call to updateCenterLines,\u000a      // but only one because all the lines will be hidden\u000a      resetCenter(field);\u000a    }\u000a    else if (multiballStatus == MultiballStatus.NOT_READY) {\u000a      field.showGameMessage(\"Shoot the pyramid!\", 3000);\u000a      multiballStatus = MultiballStatus.READY;\u000a    }\u000a  }\u000a};\u000a\u000adef checkForRamp = {field, ball, sensorId, ballColor ->\u000a  if (sensorId == previousSensors[ball]) {\u000a    if (!hasBallWithColor(field, ballColor)) {\u000a      setBallColor(ball, ballColor);\u000a      updateCenterRollovers(field);\u000a    }\u000a    def percentMultiplier = 100 + rampBonuses[ballColor];\u000a    if (field.getBalls().size() > 1) {\u000a      percentMultiplier *= 2;\u000a    }\u000a    def score = (RAMP_BASE_SCORE/100) * percentMultiplier;\u000a    field.addScore(score.toLong());\u000a  }\u000a};\u000a\u000aresetCenter = {field ->\u000a  BALL_COLOR_VALUES.each {ballColor ->\u000a    centerRolloversByColor[ballColor].each {rollover ->\u000a      rollover.setRolloverActiveAtIndex(0, false);\u000a    }\u000a  }\u000a  updateCenterRollovers(field);\u000a  updateCenterLines(field);\u000a};\u000a\u000adef incrementRampBonus = {field, ballColor, name ->\u000a  rampBonuses[ballColor] += 10;\u000a  field.showGameMessage(name + \" ramp bonus +\" + rampBonuses[ballColor] + \"%\", 1500);  \u000a};\u000a\u000adef startMultiball = {field ->\u000a  triangleWalls.each {wall -> wall.setRetracted(false);}\u000a  triangleRotationSpeed = -2;\u000a  resetCenter(field);\u000a  field.removeBallWithoutBallLoss(field.getBalls()[0]);\u000a  field.getFieldElementById(\"BallSaver-left\").setRetracted(false);\u000a  field.getFieldElementById(\"BallSaver-right\").setRetracted(false);\u000a\u000a  def doLaunch = {\u000a    def ball = field.launchBall();\u000a    setBallColor(ball, unusedBallColor(field));\u000a    updateCenterRollovers(field);\u000a  };\u000a\u000a  // \"Starting\" state until the last ball is launched so we\u000a  // don't exit multiball until then.\u000a  multiballStatus = MultiballStatus.STARTING;\u000a  multiballJackpotCount = 0;\u000a  field.scheduleAction(1000, doLaunch);\u000a  field.scheduleAction(4000, doLaunch);\u000a  field.scheduleAction(7000, doLaunch);\u000a  field.scheduleAction(10000, {\u000a    doLaunch();\u000a    multiballStatus = MultiballStatus.ACTIVE;\u000a  });\u000a};\u000a\u000adef endMultiball = {field ->\u000a  triangleRotationSpeed = 1;\u000a  triangleCenterRollover.setRolloverActiveAtIndex(0, false);\u000a  resetCenter(field);\u000a  multiballStatus = MultiballStatus.NOT_READY;\u000a};\u000a\u000adef doExtraBall = {field ->\u000a  field.addExtraBall();\u000a  field.showGameMessage(\"Extra Ball!\", 3000);\u000a};\u000a\u000adef resetExtraBallIfNeeded = {\u000a  if (extraBallRollover.allRolloversActive()) {\u000a    extraBallRollover.setRolloverActiveAtIndex(0, false);\u000a    extraBallBarriers.each {wall -> wall.setRetracted(false);};\u000a  }\u000a};\u000a\u000a// These methods are called for specific game events.\u000areturn [\u000a  gameStarted: {field ->\u000a    // Initialize common variables.\u000a    launchBarrier = field.getFieldElementById(\"LaunchBarrier\");\u000a\u000a    triangleRotationAngle = TAU/4; // \u000a    triangleWalls = (1..3).collect {index ->\u000a      field.getFieldElementById(\"TriangleWall\" + index);\u000a    };\u000a    triangleCenterRollover = field.getFieldElementById(\"TriangleCenter\");\u000a\u000a    previousSensors = [:];\u000a\u000a    centerRolloversByColor = [\u000a      (BallColor.BLUE): (1..3).collect {index ->\u000a        field.getFieldElementById(\"CenterRollover_Blue_\" + index);\u000a      },\u000a      (BallColor.RED): (1..3).collect {index ->\u000a        field.getFieldElementById(\"CenterRollover_Red_\" + index);\u000a      },\u000a      (BallColor.YELLOW): (1..3).collect {index ->\u000a        field.getFieldElementById(\"CenterRollover_Yellow_\" + index);\u000a      },\u000a      (BallColor.GREEN): (1..3).collect {index ->\u000a        field.getFieldElementById(\"CenterRollover_Green_\" + index);\u000a      },\u000a    ];\u000a\u000a    def centerLineSuffixes = ['1_2', '2_3', '3_1'];\u000a    centerLinesByColor = [\u000a      (BallColor.BLUE): centerLineSuffixes.collect {s ->\u000a        field.getFieldElementById(\"CenterLine_Blue_\" + s);\u000a      },\u000a      (BallColor.RED): centerLineSuffixes.collect {s ->\u000a        field.getFieldElementById(\"CenterLine_Red_\" + s);\u000a      },\u000a      (BallColor.YELLOW): centerLineSuffixes.collect {s ->\u000a        field.getFieldElementById(\"CenterLine_Yellow_\" + s);\u000a      },\u000a      (BallColor.GREEN): centerLineSuffixes.collect {s ->\u000a        field.getFieldElementById(\"CenterLine_Green_\" + s);\u000a      },\u000a    ];\u000a\u000a    rampBonuses = [:];\u000a    BALL_COLOR_VALUES.each {c -> rampBonuses[c] = 0;}\u000a\u000a    extraBallBarriers = [\u000a      field.getFieldElementById(\"ExtraBallBarrier_Blue\"),\u000a      field.getFieldElementById(\"ExtraBallBarrier_Red\"),\u000a      field.getFieldElementById(\"ExtraBallBarrier_Yellow\"),\u000a      field.getFieldElementById(\"ExtraBallBarrier_Green\"),\u000a    ];\u000a    extraBallRollover = field.getFieldElementById(\"ExtraBallRollover\");\u000a\u000a    updateCenterRollovers(field);\u000a    updateCenterLines(field);\u000a    multiballStatus = MultiballStatus.NOT_READY;\u000a  },\u000a\u000a  ballLost: {field ->\u000a    updateCenterRollovers(field);\u000a    previousSensors.clear();\u000a  },\u000a\u000a  ballInSensorRange: {field, sensor, ball ->\u000a    def sensorId = sensor.getElementId();\u000a    // Check for retracting or restoring the launch barrier.\u000a    if (sensorId == \"LaunchBarrierSensor\") {\u000a      launchBarrier.setRetracted(false);\u000a    }\u000a    else if (sensorId == \"LaunchBarrierRetract\") {\u000a      launchBarrier.setRetracted(true);\u000a    }\u000a    else if (sensorId == \"RampSensor_OuterLeftTop\") {\u000a      checkForRamp(field, ball, \"RampSensor_OuterRightTop\", BallColor.GREEN);\u000a    }\u000a    else if (sensorId == \"RampSensor_OuterRightTop\") {\u000a      checkForRamp(field, ball, \"RampSensor_OuterLeftTop\", BallColor.BLUE);\u000a    }\u000a    else if (sensorId == \"RampSensor_LeftTop\") {\u000a      checkForRamp(field, ball, \"RampSensor_LeftMiddle\", BallColor.RED);\u000a    }\u000a    else if (sensorId == \"RampSensor_RightTop\") {\u000a      checkForRamp(field, ball, \"RampSensor_RightMiddle\", BallColor.YELLOW);\u000a    }\u000a    else if (sensorId == \"Sensor_ExtraBallExit\") {\u000a      resetExtraBallIfNeeded();\u000a    }\u000a\u000a    previousSensors[ball] = sensorId;\u000a  },\u000a\u000a  allDropTargetsInGroupHit: {field, targetGroup ->\u000a    // Activate ball saver for left and right groups.\u000a    def id = targetGroup.getElementId();\u000a    if (id == \"DropTargetLeftSave\") {\u000a      field.getFieldElementById(\"BallSaver-left\").setRetracted(false);\u000a      field.showGameMessage(\"Left Save Enabled\", 1500);\u000a    }\u000a    else if (id == \"DropTargetRightSave\") {\u000a      field.getFieldElementById(\"BallSaver-right\").setRetracted(false);\u000a      field.showGameMessage(\"Right Save Enabled\", 1500);\u000a    }\u000a    else if (id == \"DropTargets_BlueRamp\") {\u000a      incrementRampBonus(field, BallColor.BLUE, \"Blue\");\u000a    }\u000a    else if (id == \"DropTargets_RedRamp\") {\u000a      incrementRampBonus(field, BallColor.RED, \"Red\");\u000a    }\u000a    else if (id == \"DropTargets_YellowRamp\") {\u000a      incrementRampBonus(field, BallColor.YELLOW, \"Yellow\");\u000a    }\u000a    else if (id == \"DropTargets_GreenRamp\") {\u000a      incrementRampBonus(field, BallColor.GREEN, \"Green\");\u000a    }\u000a  },\u000a\u000a  allRolloversInGroupActivated: {field, rollovers ->\u000a    def id = rollovers.getElementId();\u000a    if (id == \"FlipperRollovers\") {\u000a      field.incrementScoreMultiplier();\u000a      field.showGameMessage(field.getScoreMultiplier().intValue() + \"x Multiplier\", 1500);\u000a      rollovers.setAllRolloversActivated(false);\u000a    }\u000a    else if (rollovers == triangleCenterRollover) {\u000a      // Should always be ready, but just a sanity check.\u000a      if (multiballStatus == MultiballStatus.READY) {\u000a        startMultiball(field);\u000a      }\u000a    }\u000a    else if (rollovers == extraBallRollover) {\u000a      doExtraBall(field);\u000a    }\u000a    updateCenterLines(field);\u000a  },\u000a\u000a  processCollision: {field, element, body, ball ->\u000a    if (multiballStatus == MultiballStatus.READY) {\u000a      if (triangleWalls.contains(element)) {\u000a        element.setRetracted(true);\u000a      }\u000a    }\u000a  },\u000a\u000a  isFieldActive: {field -> return true;},\u000a\u000a  tick: {field, nanos ->\u000a    if (triangleWalls!=null && triangleRotationSpeed!=0) {\u000a      triangleRotationAngle +=\u000a          (triangleRotationSpeed * triangleRotationBaseSpeed) * nanos/1e9;\u000a      if (triangleRotationAngle < 0) triangleRotationAngle += TAU;\u000a      if (triangleRotationAngle >= TAU) triangleRotationAngle -= TAU;\u000a      def a0 = triangleRotationAngle;\u000a      def a1 = triangleRotationAngle + TAU/3;\u000a      def a2 = triangleRotationAngle - TAU/3;\u000a      def x0 = (triangleCenter[0] + triangleRadius*Math.cos(a0)).toFloat();\u000a      def y0 = (triangleCenter[1] + triangleRadius*Math.sin(a0)).toFloat();\u000a      def x1 = (triangleCenter[0] + triangleRadius*Math.cos(a1)).toFloat();\u000a      def y1 = (triangleCenter[1] + triangleRadius*Math.sin(a1)).toFloat();\u000a      def x2 = (triangleCenter[0] + triangleRadius*Math.cos(a2)).toFloat();\u000a      def y2 = (triangleCenter[1] + triangleRadius*Math.sin(a2)).toFloat();\u000a      // change wall position?\u000a      triangleWalls[0].setStartAndDirection(x0, y0, x1, y1);\u000a      triangleWalls[1].setStartAndDirection(x1, y1, x2, y2);\u000a      triangleWalls[2].setStartAndDirection(x2, y2, x0, y0);\u000a    }\u000a\u000a    // Check for exiting multiball.\u000a    if (field.getBalls().size()<=1 && multiballStatus == MultiballStatus.ACTIVE) {\u000a      endMultiball(field);\u000a    }\u000a  },\u000a]",
    "targetTimeRatio": "2.3",
    "version": 1,
    "width": "20"
}